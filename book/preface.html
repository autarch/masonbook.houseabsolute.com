<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>
The Mason Book
</title>
<link rel="stylesheet" type="text/css" href="/masonbook.css">
</head>

<body>

<div class="bodybox">

 <div class="titlebox">

  <div class="titleboximage">
   <a href="/"><img src="/i/cover_small.jpg" width="110" height="144" class="smallcover" alt="Small cover"></a>
  </div>

  <div class="titleboxtext">

   <span class="booktitle">Embedding Perl in HTML with Mason</span><br>
   <span class="bookauthors">Dave Rolsky<br>Ken Williams</span>

  </div>

 </div>

 <div class="mainbox">
  <div class="mainbox2">

   <div class="menubox">
    <h4 id="here">Here</h4>


    <a href="/index.html">Home</a><br>
    <a href="/news/">News</a><br>
    <b>Read it online</b><br>
    <a href="/source/">Example Code</a><br>
    <a href="/authors.html">Authors</a><br>
    <a href="/errata.html">Errata</a><br>
    <a href="/quotes.html">Praise</a><br>
    <a href="/contact.html">Contact us</a><br>
    <a href="/buy.html">Buy the book!</a>


    <h4 class="menu">There</h4>
    <a href="http://www.masonhq.com/">Mason HQ</a><br>
    <a href="http://www.oreilly.com/">O'Reilly</a><br>
    <a href="http://perl.apache.org/">mod_perl</a>
   </div>

<p class="book-menu">
<a href="index.html">Table of Contents</a>
|
<a href="foreword.html">Foreword</a>
|
<b>Preface</b>
<br>
Chapters: 
<a href="chapter-1.html">1</a>
<a href="chapter-2.html">2</a>
<a href="chapter-3.html">3</a>
<a href="chapter-4.html">4</a>
<a href="chapter-5.html">5</a>
<a href="chapter-6.html">6</a>
<a href="chapter-7.html">7</a>
<a href="chapter-8.html">8</a>
<a href="chapter-9.html">9</a>
<a href="chapter-10.html">10</a>
<a href="chapter-11.html">11</a>
<a href="chapter-12.html">12</a>
<br>
Appendices:
<a href="appendix-a.html">A</a>
<a href="appendix-b.html">B</a>
<a href="appendix-c.html">C</a>
<a href="appendix-d.html">D</a>
<br>
<a href="glossary.html">Glossary</a>
|
<a href="colophon.html">Colophon</a>
|
<a href="copyright.html">Copyright</a>
</p>




<hr width="80%" align="left">

<a name="TOC-ANCHOR-0"></a>
<h1>Preface</h1><p class="content">
<a name="PREFACE"></a>

</p>
<p class="content">
Mason is a tool for embedding the Perl programming language into text, in order
to create text dynamically, most often in HTML. But Mason does not simply stop
at HTML. It can just as easily create XML, WML, POD, configuration files, or
the complete works of Shakespeare.
</p>
<p class="content">
Mason was originally written by Jonathan Swartz, with the help of the rest of
the CMP development team at CMP Media in 1996, and in its earliest incarnations
it was known as Scribe.
</p>
<p class="content">
Mason was first made publicly available as Version 0.1 in August of 1998. Since
that time, Jonathan Swartz has invited your humble authors to participate in
the further development of Mason. Mason has been expanded, and rewritten and is
much changed from those early days. This book covers Version 1.12 of Mason.
</p>
<a name="TOC-ANCHOR-1"></a>
<h2>Intended Audience</h2><p class="content">
<a name="PREFACE-SECT-1"></a>

</p>
<p class="content">
This book assumes that the reader is familiar with Perl at an intermediate
level and that common Perl idioms don&#39;t stop you in your tracks. While you
need not have written your own modules previously, familiarity with Perl&#39;s
object-oriented syntax will be helpful.
</p>
<p class="content">
Since Mason is most often used in the generation of web sites, this book
frequently presents its example in terms of generating HTML pages. You
definitely do not need to be an HTML expert to read this book, but a passing
familiarity with HTML will be helpful in understanding what the output is
intended to look like.
</p>
<p class="content">
As previously mentioned, Mason is well-suited for the generation of any sort of
dynamic text, including markup languages such as XML, as well as configuration
files, email bodies (think mail merge, perhaps), or even code.
</p>
<p class="content">
Finally, experience with <code>mod_perl</code> and Apache will be helpful for <a href="chapter-7.html">Chapter 7</a> and <a href="chapter-9.html">Chapter 9</a>, which discuss integrating Mason with <code>mod_perl</code> and CGI, respectively, though the rest of the book should be easily
comprehensible regardless of your familiarity with those particular topics.
</p>
<a name="TOC-ANCHOR-2"></a>
<h2>Requirements</h2><p class="content">
<a name="PREFACE-SECT-2"></a>

</p>
<p class="content">
As of Version 1.12, Mason requires Perl Version 5.00503 or later, as well as
the following modules available from CPAN: Class::Container 0.07+, File::Spec
0.8+, Params::Validate 0.24+, Exception::Class 1.01+, and Cache::Cache 1.00+.
</p>
<p class="content">
If you want to run Mason under <code>mod_perl</code>, you will need to have at least Version 1.22 of <code>mod_perl</code> installed (although installing the very latest version in the 1.<em>x</em> series is highly recommended). You&#39;ll also probably want Apache::Request
0.31+, though this is not strictly required.
</p>
<p class="content">
Some of the examples are designed to work in a web server context and may
require either CGI or <code>mod_perl</code> capabilities. For the CGI examples, any CGI-capable web server is sufficient,
though our configuration examples always assume Apache.
</p>
<p class="content">
Mason itself is designed to be platform-agnostic. Any behavior to the contrary
should be considered a bug in Mason, and bug reports are always welcome.
</p>
<p class="content">
In writing this book, we did our testing with Perl 5.6.1 and <code>mod_perl</code> 1.25, with Apache 1.3.22, so it is possible that something shown here may not
work as expected with other versions of these pieces of software. If you find
this to be the case, please let us know and we&#39;ll either fix the example or
make a note of the dependencies.
</p>
<a name="TOC-ANCHOR-3"></a>
<h2>How to Read This Book</h2><p class="content">
<a name="PREFACE-SECT-3"></a>

</p>
<p class="content">
This book is not a reference manual. While certain chapters, notably <a href="chapter-4.html">Chapter 4</a>, are reference-like in nature, the book as a whole builds chapter upon chapter and often refers to material covered earlier. Nonetheless, some readers may prefer to look at <a href="chapter-8.html">Chapter 8</a> early, so an alternate path through the book might be to read that chapter right after <a href="chapter-1.html">Chapter 1</a>.
</p>
<p class="content">
Once you become more familiar with Mason, we expect that much of the book will
still be useful as a reference, particularly <a href="chapter-4.html">Chapter 4</a>, <a href="chapter-5.html">Chapter 5</a>, <a href="chapter-6.html">Chapter 6</a>, and <a href="chapter-7.html">Chapter 7</a>.
</p>
<p class="content">
<a href="appendix-a.html">Appendix A</a> and <a href="appendix-b.html">Appendix B</a> present much of the same material as those chapters in a more streamlined reference style, and should also be useful long after you have become a Mason guru. <a href="appendix-c.html">Appendix C</a> is a short discussion of editors you can use with Mason, and <a href="appendix-d.html">Appendix D</a> covers Bricolage, a content management system based on Mason.
</p>
<p class="content">
Finally, the book includes a short glossary for those of you who are new to Mason and its terminology.
</p>
<a name="TOC-ANCHOR-4"></a>
<h2>Overview</h2><p class="content">
<a name="PREFACE-SECT-4"></a>

</p>
<ul>
<li>
<div class="book-list-item-heading">
<a href="chapter-1.html">Chapter 1</a></div>
<p class="content">
This chapter goes into more detail on what Mason is, highlights a few of its
most notable features, and also discusses some alternatives to Mason.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-2.html">Chapter 2</a></div>
<p class="content">
Components are the basic building block in Mason. This chapter covers component
syntax and how components can call one another, much like Perl subroutines.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-3.html">Chapter 3</a></div>
<p class="content">
The topic of this chapter is dhandlers and autohandlers, two features unique to
Mason that really can help you maximize code reuse.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-4.html">Chapter 4</a></div>
<p class="content">
This chapter is a bit more of a reference than those before it, as it has a lot
of ground to cover. We cover the APIs of various objects that you might want to
access from your components, primarily the Mason request object.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-5.html">Chapter 5</a></div>
<p class="content">
Now that you know about component syntax, dhandlers, autohandlers, and a good
chunk of the Mason API, it&#39;s time to learn about some of Mason&#39;s more
complex features, like component methods and attributes, components that filter
content, and Mason subrequests.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-6.html">Chapter 6</a></div>
<p class="content">
These objects form the core of Mason itself, and their constructor parameters
and object APIs let you customize the way Mason handles requests.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-7.html">Chapter 7</a></div>
<p class="content">
Mason and <code>mod_perl</code> are designed to play nice together, and this chapter shows you how to make
this happen.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-8.html">Chapter 8</a></div>
<p class="content">
The obligatory sample site. See Mason at work on a real, live, on-the-Internet,
usable-by-you web site.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-9.html">Chapter 9</a></div>
<p class="content">
If you can&#39;t use <code>mod_perl</code>, you may still want to use Mason to generate web pages via CGI scripts.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-10.html">Chapter 10</a></div>
<p class="content">
Mason is cool, but it&#39;s not magic. You still need to think about
architecture and design when designing a Mason-based application. We try to
give you a few things to think about here.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-11.html">Chapter 11</a></div>
<p class="content">
This chapter demonstrates a number of different uses of Mason in order to
stimulate your thinking, as well as provide some easily customized example
code.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="chapter-12.html">Chapter 12</a></div>
<p class="content">
A how-to on creating your own customized Mason subclasses.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="appendix-a.html">Appendix A</a></div>
<p class="content">
All the APIs we covered earlier, in a more concise form.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="appendix-b.html">Appendix B</a></div>
<p class="content">
A spiffy table of constructor parameters.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="appendix-c.html">Appendix C</a></div>
<p class="content">
Information on using Emacs and Vim to edit Mason components.
</p>
</li>
<li>
<div class="book-list-item-heading">
<a href="appendix-d.html">Appendix D</a></div>
<p class="content">
David Wheeler explains how to use Bricolage, a content management system built
with Mason that can use Mason to generate web pages.
</p>

</ul>
<a name="TOC-ANCHOR-5"></a>
<h2>Other Resources</h2><p class="content">
<a name="PREFACE-SECT-5"></a>

</p>
<p class="content">
The most important online resource for Mason is the Mason HQ site located at <a href="http://www.masonhq.com/">http://www.masonhq.com/</a>. This site includes an online copy of the documentation, a Frequently Asked
Questions database, news, user-contributed code and documentation, and much
more. The bug tracker on Mason HQ is kept up-to-date, and it is a good source
of information about limitations in certain versions of Mason. There is also a
to-do list that can give you insights on future directions planned by the Mason
developers.
</p>
<p class="content">
Mason HQ also provides information on subscribing to the various Mason mailing
lists, of which the most important is the <em>mason-users</em> list. See <a href="http://www.masonhq.com/resources/mailing_lists.html">http://www.masonhq.com/resources/mailing_lists.html</a> for more details.
</p>
<p class="content">
This book&#39;s web site, at <a href="http://www.masonbook.com/">http://www.masonbook.com/</a>, will always contain the latest digital version of the book, freely available.
In addition, we will make sure to report any errata found in the published
edition(s), as well as providing downloadable versions of all of the source
code found in the book.
</p>
<a name="TOC-ANCHOR-6"></a>
<h2>Typographic Conventions</h2><p class="content">
<a name="PREFACE-SECT-6"></a>

</p>
<ul>
<li>
<div class="book-list-item-heading">
<code>Constant width</code></div>
<p class="content">
is used for literal text, module names, function names, method names, and
keywords
</p>
</li>
<li>
<div class="book-list-item-heading">
<em>Italics</em></div>
<p class="content">
is used for filenames, components, commands, URLs, emphasis, and terms when
they are first introduced
</p>

</ul>
<a name="TOC-ANCHOR-7"></a>
<h2>We&#39;d Like to Hear from You</h2><p class="content">
<a name="PREFACE-SECT-7"></a>

</p>
<p class="content">
Please send comments and questions concerning this book to the publisher at the
following address:
</p>
<ul>
<li>
O&#39;Reilly &amp; Associates, Inc.</li>
<li>
1005 Gravenstein Highway North</li>
<li>
Sebastopol, CA 95472</li>
<li>
(800) 998-9938 (in the United States or Canada)</li>
<li>
(707) 829-0515 (international or local)</li>
<li>
(707) 829-0104 (fax)
</ul>
<p class="content">
We have a web page for this book, where we list errata, examples, or any
additional information. You can access this page at:
</p>
<ul>
<li>
<a href="http://www.oreilly.com/catalog/perlhtmlmason">http://www.oreilly.com/catalog/perlhtmlmason</a>
</ul>
<p class="content">
To comment or ask technical questions about this book, send email to:
</p>
<ul>
<li>
<a href="mailto:bookquestions@oreilly.com">bookquestions@oreilly.com</a>
</ul>
<p class="content">
For more information about our books, conferences, Resource Centers, and the
O&#39;Reilly Network, see our web site at:
</p>
<ul>
<li>
<a href="http://www.oreilly.com">http://www.oreilly.com</a>
</ul>
<a name="TOC-ANCHOR-8"></a>
<h2>Open Publication License</h2><p class="content">
<a name="PREFACE-SECT-8"></a>

</p>
<p class="content">
This book is published under the Open Publication License (OPL), as follows:
</p>
<blockquote>
<p class="blockquote">
Open Publication License Draft v1.0, 8 June 1999
</p>
<p class="blockquote">
I. REQUIREMENTS ON BOTH UNMODIFIED AND MODIFIED VERSIONS
</p>
<p class="blockquote">
The Open Publication works may be reproduced and distributed in whole or in
part, in any medium physical or electronic, provided that the terms of this
license are adhered to, and that this license or an incorporation of it by
reference (with any options elected by the author(s) and/or publisher) is
displayed in the reproduction.
</p>
<p class="blockquote">
Proper form for an incorporation by reference is as follows: Copyright (c) 2003
by O&#39;Reilly &amp; Associates, Inc. This material may be distributed only
subject to the terms and conditions set forth in the Open Publication License,
v1.0 or later (the latest version is presently available at <a href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>). Commercial redistribution of Open Publication-licensed material is
permitted.
</p>
<p class="blockquote">
Any publication in standard (paper) book form shall require the citation of the
original publisher and author. The publisher and author&#39;s names shall
appear on all outer surfaces of the book. On all outer surfaces of the book the
original publisher&#39;s name shall be as large as the title of the work and
cited as possessive with respect to the title.
</p>
<p class="blockquote">
OPTION B: Distribution of the work or derivative of the work in any standard
(paper) book form for commercial purposes is prohibited unless prior permission
is obtained from the copyright holder.
</p>
<p class="blockquote">
II. COPYRIGHT
</p>
<p class="blockquote">
The copyright to each Open Publication is owned by its author(s) or designee.
</p>
<p class="blockquote">
III. SCOPE OF LICENSE
</p>
<p class="blockquote">
The following license terms apply to all Open Publication works, unless
otherwise explicitly stated in the document. Mere aggregation of Open
Publication works or a portion of an Open Publication work with other works or
programs on the same media shall not cause this license to apply to those other
works. The aggregate work shall contain a notice specifying the inclusion of
the Open Publication material and appropriate copyright notice.
</p>
<p class="blockquote">
SEVERABILITY. If any part of this license is found to be unenforceable in any
jurisdiction, the remaining portions of the license remain in force.
</p>
<p class="blockquote">
NO WARRANTY. Open Publication works are licensed and provided &quot;as is&quot;
without warranty of any kind, express or implied, including, but not limited
to, the implied warranties of merchantability and fitness for a particular
purpose or a warranty of non-infringement.
</p>
<p class="blockquote">
IV. REQUIREMENTS ON MODIFIED WORKS
</p>
<p class="blockquote">
All modified versions of documents covered by this license, including
translations, anthologies, compilations and partial documents, must meet the
following requirements:
</p>
<ol>
<li>
The modified version must be labeled as such.</li>
<li>
The person making the modifications must be identified and the modifications
dated.</li>
<li>
Acknowledgement of the original author and publisher if applicable must be
retained according to normal academic citation practices.</li>
<li>
The location of the original unmodified document must be identified.</li>
<li>
The original author&#39;s (or authors&#39;) name(s) may not be used to assert
or imply endorsement of the resulting document without the original
author&#39;s (or authors&#39;) permission.
</ol>
<p class="blockquote">
V. GOOD-PRACTICE RECOMMENDATIONS
</p>
<p class="blockquote">
In addition to the requirements of this license, it is requested from and
strongly recommended of redistributors that:
</p>
<ol>
<li>
If you are distributing Open Publication works on hardcopy or CD-ROM, you
provide email notification to the authors of your intent to redistribute at
least thirty days before your manuscript or media freeze, to give the authors
time to provide updated documents. This notification should describe
modifications, if any, made to the document.</li>
<li>
All substantive modifications (including deletions) be either clearly marked up
in the document or else described in an attachment to the document.</li>
<li>
Finally, while it is not mandatory under this license, it is considered good
form to offer a free copy of any hardcopy and CD-ROM expression of an Open
Publication-licensed work to its author(s).
</ol>

</blockquote>

<p class="content">
For more information about the Open Publication License, visit the Open Content
web site at <a href="http://www.opencontent.org/openpub">http://www.opencontent.org/openpub</a>.
</p>
<a name="TOC-ANCHOR-9"></a>
<h2>Acknowledgments</h2><p class="content">
<a name="PREFACE-SECT-9"></a>

</p>
<p class="content">
Ken would like to thank Dunn Brothers Coffee in St. Paul, Minnesota, where huge
chunks of this book were written over steamy mochas in between crossword puzzle
sessions. He would like to thank Apple Computer for creating the iBook, Cyclic
Software for creating the CVS revision control system, and Larry Wall for
creating the much-overstressed POD markup language, all of which were essential
tools in the creation of this book. He&#39;d like to thank Helen Plotkin and
the rest of the Math Forum for turning a naive young mathematician into a salty
programmer of the world. He&#39;d like to thank his friends and family for not
asking too many questions about what he does all day. Most importantly, he
would like to thank Sheri Schechinger for being proud of a lowly open source
programmer, for asking questions about what he does all day, and for giving him
something so wonderful to come home to.
</p>
<p class="content">
Dave would first and foremost like to thank his wife, Huey-Ling Chen, for her
support and humor, particularly the &quot;juice guy&quot; incident (he&#39;d
explain, but then he&#39;d have to juice you). He also wants to thank
DoTheGood, Inc., in particular Gabriel Cheifetz, for providing such a great
place to work while at the same time giving him enough free time to actually
write this thing. Jonathan Swartz deserves thanks and sympathy for letting Dave
muck up his code in such a cruel and twisted manner. Jon will no doubt get over
the shock one day. Finally, Dave wants to thank any friend or family member who
had the good grace not to cruelly mock him when they asked &quot;when will the
book be out?&quot; and he responded with something like &quot;oh, it&#39;s
almost done, it should be out in a few months.&quot; How wrong he was!
</p>
<p class="content">
Both authors would like to thank our unshockable editor, Linda Mui, and our
crack team of technical reviewers: Alex Edelman, Jules Cook Graybill, Joe
Johnston, Mike Stok, Jonathan Swartz, David Wheeler, and John Williams. David
Wheeler in particular needs to be singled out for praise, not only for his
excellent appendix on Bricolage (<a href="appendix-d.html">Appendix D)</a>, but also for his careful, detailed review. If his review comments were printed in the same typeface as this book, they would be about 100 pages long! Without his comments, and those of our other reviewers, this book would pretty much suck.
</p>
<p class="content">
Joshua Chamas, Mark-Jason Dominus, Gerald Richter, and Sam Tregar provided
invaluable feedback on the comparisons to other templating systems, in many
cases defending their own systems from the ham-handed errors we made in
describing them.
</p>
<p class="content">
The entire group of overseers is responsible for transforming a disorganized
and error-ridden draft into what we hope is a useful resource for billions and
billions of Mason users. Or at least a few dozen.
</p>
<hr>
<p class="book-menu">
<a href="index.html">Table of Contents</a>
|
<a href="foreword.html">Foreword</a>
|
<b>Preface</b>
<br>
Chapters: 
<a href="chapter-1.html">1</a>
<a href="chapter-2.html">2</a>
<a href="chapter-3.html">3</a>
<a href="chapter-4.html">4</a>
<a href="chapter-5.html">5</a>
<a href="chapter-6.html">6</a>
<a href="chapter-7.html">7</a>
<a href="chapter-8.html">8</a>
<a href="chapter-9.html">9</a>
<a href="chapter-10.html">10</a>
<a href="chapter-11.html">11</a>
<a href="chapter-12.html">12</a>
<br>
Appendices:
<a href="appendix-a.html">A</a>
<a href="appendix-b.html">B</a>
<a href="appendix-c.html">C</a>
<a href="appendix-d.html">D</a>
<br>
<a href="glossary.html">Glossary</a>
|
<a href="colophon.html">Colophon</a>
|
<a href="copyright.html">Copyright</a>
</p>

<p>
These HTML pages were created by running <a
href="book_as_html">this script</a> against the <a
href="mason-book.tar.gz">pseudo-POD source</a>.
</p>




  </div>

 </div>

</div>

</body>
</html>
